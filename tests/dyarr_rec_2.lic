type foo = record {
    arr []u8;
    len u64;
};

foo_init efx = mut foo & mut mem;

fn init(mut f foo, arr []u8) unit = foo_init {
    f.arr = arr;
};

pub fn main() void = foo_init {
    new buff | 20 {
        let mut f = foo {
            arr = [],
            len = 4,
        };
        init(f, new ! [f.len; 4, 3, 2, 1, 0...] @ buff);
        test f.arr[0]! == 4 && f.arr[4]! == 0;
    }!;
};
