// parser and compiler test for
// functions that return arrays

io mod = use "std/io.lim";

fn new_arr(x u32, y u32, z u32) [3]u32 = {
    return [x, y, z];
};

fn part_arr(x u32, y u32, z u32) ![3]u32 = {
    if (x + y + z) == 0 {
        return fail;
    } else {
        return new_arr(x, y, z);
    };
};

pub fn main() void = io {
    let arr = new_arr(1, 3, 4);
    let arr' = part_arr(2, 4, 7)!;

    let err = part_arr(0, 0, 0)! 
        or io::println("test 1 ok")!;

    if arr'[1] == 4 && arr[2] == arr'[1] {
        io::println("test 2 ok")!;
    } else {
        io::println("test 2 fail")!;
    };
};
